!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("d3")):"function"==typeof define&&define.amd?define("suku-webcomponents",["exports","@angular/core","d3"],e):e(t["suku-webcomponents"]={},t.ng.core,t.d3)}(this,function(t,e,r){"use strict";var i=function(){function t(){this.boxWidth=180,this.boxHeight=55,this.margin={top:50,right:5,bottom:50,left:5},this.width=1360-this.margin.left-this.margin.right,this.height=610-this.margin.top-this.margin.bottom}return t.prototype.ngOnChanges=function(){console.log("called"),this.treeDataFromApi&&(console.log("data>",this.treeDataFromApi),this.constructTree())},t.prototype.constructTree=function(){var t=JSON.parse(this.treeDataFromApi);this.i=0,t&&(this.tree=r.layout.tree().separation(function(t,e){return t.parent===e.parent?5:5.25}).children(function(t){return t.childrens}).size([this.height,this.width]),this.svg=r.select(".tree").append("svg").attr("width",this.width+this.margin.right+this.margin.left).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.root=t[0],this.drawTree())},t.prototype.drawTree=function(){var n=this,t=this.tree.nodes(this.root).reverse(),e=this.tree.links(t);t.forEach(function(t){t.y=n.width-109-270*t.depth});var r=this.svg.selectAll("g.node").data(t,function(t){return t.id||(t.id=++n.i)});r.enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+t.y+","+t.x+")"});r.append("line").style("stroke",function(t){return 1===t.level?"#6f3bda":2===t.level?"#3fdbef":3===t.level?"#b8ce2b":"#3fdbef"}).attr("x1",-this.boxWidth/2).attr("y1",-this.boxHeight/2).attr("x2",-this.boxWidth/2).attr("y2",this.boxHeight/2).attr("stroke-width","10"),r.append("rect").attr({x:-this.boxWidth/2,y:-this.boxHeight/2,width:this.boxWidth,height:this.boxHeight}).attr("fill","white").attr("stroke-width",".07").attr("stroke","black"),r.append("text").attr("x",function(t){return-n.boxWidth/20}).attr("y",function(t){return n.boxWidth/60}).style("text-anchor","middle").text(function(t){return t.product.name}),this.svg.selectAll("path.link").data(e,function(t){return(n.data=t).target.id}).enter().insert("path","g").attr("class","link").attr("stroke","#000").attr("shape-rendering","crispEdges").attr("d",function(t){var e=t.source.x,r=t.source.y+n.boxWidth/2,i=t.target.x,o=t.target.y-n.boxWidth/2;return"M"+r+","+e+"H"+(r+(o-r)/2)+"V"+i+"H"+o})},t.decorators=[{type:e.Component,args:[{selector:"suku-tree",template:'<div class="tree"></div>\n',styles:["/deep/.node text{font-size:16px;font-family:'Encode Sans',sans-serif;fill:#aaa}/deep/.link{fill:none;stroke:#c2c1c1;stroke-width:2px}/deep/.tree{width:100%;overflow-x:scroll!important;direction:rtl!important}/deep/svg{overflow-x:scroll!important}"]}]}],t.propDecorators={treeDataFromApi:[{type:e.Input,args:["tree-data"]}]},t}(),o=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[i],imports:[],exports:[i]}]}],t}();t.SukuWebcomponentsModule=o,t.Éµa=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=suku-webcomponents.umd.min.js.map